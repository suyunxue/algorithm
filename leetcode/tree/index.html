<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
</head>
<body>
	<script>
		function TreeNode(val) {
            this.val = val;
            this.left = this.right = null;
        }

        function BinaryTree() {
            TreeNode.call(this);
            this.root = null;
            this.insert = insert;
            this.insertNode = insertNode
        }

        function insertNode(node, newNode) {
            if (node.val < newNode.val) {
                if (node.left === null) {
                    node.left = newNode;
                }
                else {
                    insertNode(node.left, newNode);
                }
            }
            else {
                if (node.right === null) {
                    node.right = newNode;
                }
                else {
                    insertNode(node.right, newNode);
                }
            }

        }

        function insert(val) {
           let newNode = new TreeNode(val);
            if (root === null) {
               root = newNode;
            } 
            else {
                this.insertNode(root, newNode);
            }
        }

        var sortedArrayToBST = function(nums) {
            return ToBST(nums, 0, nums.length - 1);
        };

        function ToBST(nums, left, right) {
            if (left > right) {
                return null;
            }

            var mid = parseInt((left + right) / 2);
            var root = new TreeNode(nums[mid]);
            root.left = ToBST(nums, left, mid - 1);
            root.right = ToBST(nums, mid + 1, right);
            return root;
        }

        /**
         * Definition for a binary tree node.
         * function TreeNode(val) {
         *     this.val = val;
         *     this.left = this.right = null;
         * }
         */
        /**
         * @param {number[]} preorder
         * @param {number[]} inorder
         * @return {TreeNode}
         */
        var buildTree = function(preorder, inorder) {
            let map = {};
            let preIndex = 0;

            function help(left, right) {
                if (left === right) {
                    return null;
                }

                let rootVal =  preorder[preIndex];
                let root = new TreeNode(rootVal);

                preIndex++;

                let index = map[rootVal];
                
                root.left = help(left, index);
                root.right = help(index + 1, right);

                return root;
            }


            for (let i = 0; i < inorder.length; i++) {
                map[inorder[i]] = i;
            }

            return help(0, preorder.length);
        };
	</script>
</body>
</html>